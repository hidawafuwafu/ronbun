% !TEX encoding = UTF-8 Unicode

\documentclass[a4j,12pt]{jsarticle}
\usepackage[dvipdfmx]{graphicx}
\usepackage{newtxtext} % アルファベットなどをTimesNewRomanで
%\usepackage{newpxtext} % アルファベットなどをPalatinoで
% 両方共コメントアウトするとComputer Modernで

\usepackage{listings}
\usepackage{okumacro}
\usepackage{graphicx}
\usepackage{url}
\usepackage{tabularx}
\usepackage{colortbl}
%\usepackage{float}
\usepackage{makeidx}
\usepackage{fouriernc}
\usepackage[deluxe]{otf}
\usepackage{mediabb}
\usepackage{amsmath}
\usepackage{moreverb}
%\usepackage{verbatim}

\usepackage{verbatim}
\usepackage{multirow}

% \usepackage[margin=2cm]{geometry}
\usepackage[top=20truemm,bottom=20truemm,left=30truemm,right=20truemm]{geometry}

\usepackage{dcolumn}
\usepackage{ascmac}
\usepackage{color}
\usepackage{eclbkbox}
\usepackage{itembkbx}
\usepackage{enumerate} %箇条書きを装飾する際に使う
\usepackage{multicol}
% 自分で追加
\usepackage{comment}%複数行コメントアウト
\usepackage{multirow}%表結合
\usepackage{here} %図や表などを強制的に出力
\usepackage{fancybox} %四角で囲む
\usepackage{boxedminipage} %箇条書きを四角で囲む
\usepackage{caption} %キャプションの設定
\usepackage{longtable} %表がページをまたがるときの処理
\usepackage{slashbox} %表に斜線を入れる
% \usepackage{emathT} %表に斜線を入れる
\usepackage{framed} %箇条書きを枠で囲む
\newcolumntype{I}{!{\vrule width 1.5pt}}% 縦線の一部を太くする(Iで指定する)
% 横線の一部を太くする(wlineで範囲を指定する）
\newlength\savedwidth
\newcommand{\wcline}[1]{\noalign{\global\savedwidth\arrayrulewidth\global\arrayrulewidth 1.5pt} \cline{#1}
\noalign{\global\arrayrulewidth\savedwidth}}
\usepackage{lscape} % 表を横向きに表示

% 数字を丸で囲む
\def\MARU#1{\leavevmode \setbox0\hbox{$\bigcirc$}%
\copy0\kern-\wd0 \hbox to\wd0{\hfil{#1}\hfil}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\makeatletter % プリアンブルで定義開始
\renewcommand{\presectionname}{第}
\renewcommand{\postsectionname}{章}
\renewcommand{\appendixname}{付録}


%章，節，項の文字サイズ
\def\section{\@startsection {section}{1}{\z@}{3.5ex plus -1ex minus -.2ex}{2.3 ex plus .2ex}{\Large\bf}}
\def\subsection{\@startsection {subsection}{1}{\z@}{3.5ex plus -1ex minus -.2ex}{2.3 ex plus .2ex}{\Large\bf}}
\def\subsubsection{\@startsection {subsubsection}{1}{\z@}{3.5ex plus -1ex minus -.2ex}{2.3 ex plus .2ex}{\large\bf}}


\usepackage{caption} %キャプション文字サイズ（大）
\captionsetup[figure]{font=normalsize}
\captionsetup[table]{font=normalsize}
\captionsetup[equation]{font=normalsize}

% 図の番号を"<章.節の番号> - <図の番号>" へ
\renewcommand{\thefigure}{\thesubsection-\arabic{figure}}
% 表の番号を"<章.節の番号> - <表の番号>" へ
\renewcommand{\thetable}{\thesubsection-\arabic{table}}
% 数式の番号を"<章.節の番号> - <数式の番号>" へ
\renewcommand{\theequation}{\thesubsection-\arabic{equation}}

% 章と節が進むごとに図の番号をリセットする
\@addtoreset{figure}{subsection}
% 章と節が進むごとに表の番号をリセットする
\@addtoreset{table}{subsection}
% 章と節が進むごとに数式の番号をリセットする
\@addtoreset{equation}{subsection}

% 章と節が進むごとに注釈の番号をリセットする
% \@addtoreset{footnote}{subsection}

% 注釈の設定
\renewcommand{\thefootnote}{\fnsymbol{footnote}}


\makeatother % プリアンブルで定義終了


%%%%%%% グラフックパス
\graphicspath{{fig/}}
 
\makeindex
\begin{document}

% フォントサイズ・行間
\fontsize{20pt}{15pt}\selectfont

% 表紙
\thispagestyle{empty} % ページ番号削除

\begin{center}
\huge
\vspace*{\stretch{2}}

2020年度　卒業論文\\[50pt]
\HUGE

コーヒー抽出に関する音声認識可能な\
Webレシピの開発\\
\huge
\vspace*{\stretch{6}}
指導教員　須田 宇宙 准教授\\[40pt]
千葉工業大学 情報ネットワーク学科\\[10pt]
須田研究室\\[60pt]
1632130 \hspace{50pt} 氏名　肥田雄也\\[75pt]
\end{center}

\begin{flushright} 
\huge
提出日　2020年1月30日
\vspace{\stretch{2}}
\end{flushright}

\newpage
\thispagestyle{empty} % ページ番号削除
%\input{input0}

% フォントサイズ・行間
\fontsize{11pt}{15pt}\selectfont

% 目次
\pagenumbering{roman}
\setcounter{page}{1} % ページ番号1
\setcounter{tocdepth}{3}

\newpage
\tableofcontents
%\pagestyle{empty}

%\thispagestyle{empty} 

\newpage
%\thispagestyle{empty}
\listoffigures

\newpage
%\thispagestyle{empty}
\listoftables






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%ここから本文
\newpage
\pagenumbering{arabic}
\section{緒言}
\setcounter{page}{1} % ページ番号1
「悪魔のように黒く、地獄のように熱く、天使のように純粋で、愛のように甘美である。」これはフランスの外交官である，シャルル＝モーリス・ド・タレーラン＝ペリゴールが遺したコーヒーの名言である．
コーヒーはただの飲料物でありながらも，長い年月をかけて愛され，世界の人々を魅了してきた．それは日本も例外ではない．
江戸時代初期に長崎の出島に持ち込まれた際は，一部の人間しか飲用はできなかったが，明治時代に文明開化が起きるとみるみるうちに一般層に普及していった．
全日本コーヒー協会の統計資料「日本のコーヒー消費と株価」のグラフでは，2018年のコーヒー消費量がおよそ470千トンを記録していることがみてとれる\cite{Railshon1}．

コーヒーの流行は，ファーストウェーブと呼ばれる大量消費時代から始まり，その後，風味に重きが置かれたセカンドウェーブが到来する．
そして近年では，高品質なコーヒーをより良い淹れ方で味わうサードウェーブコーヒーが流行している.

%問題点
美味しいコーヒーを淹れるためには抽出器具に合わせたテクニックが必要であり，そこから生まれる創意工夫がコーヒーの楽しみ方の一つである．
誰しもが気軽にコーヒーを淹れられるようになれば，自然と新たなコーヒーの楽しみ方が生まれるようになる．

しかし抽出手順や，器具ごとの特徴の違いなどから学習の難易度が高くなり，コーヒーを淹れることの敷居も高くなっていることが問題点である．
また，実際の抽出中は，両手が塞がっていたり手が濡れているなど，レシピブックを捲ることに対する障害も多い．
クックパッドやmacaroniのような，音声認識でレシピを閲覧できるWebサイトは複数存在するが，コーヒーの抽出に特化したサイトは無いことも問題点である．

%目的
そこで，様々な抽出器具のレシピが閲覧可能であり，音声認識によってページ移行が可能なWebレシピがあれば，問題点の改善に繋がると考えた．
本研究では上記のWebレシピを作成することを目的とする．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{コーヒーについて}}
%本章では，コーヒーの歴史や流行について説明する．
\subsection{\large{コーヒーとは}}
コーヒーとは，コーヒーノキという樹木から採取される種子を焙煎し，お湯等で成分を抽出した飲料物である．主に北回帰線と南回帰線を挟むコーヒーベルトと呼ばれる地域で栽培されており，数百種類の品種が存在する．商業生産としては，高品質であるが栽培の難しいアラビカ種がおよそ60％前後を占めている．アラビカ種は，スペシャルティコーヒーと呼ばれる高品質コーヒーの主要製品であり，多くのカフェで提供されている．残りの40％はロブスタ種が占めており，こちらは品質はアラビカ種に劣るが耐病性に優れ，大量生産向きであり缶コーヒーやインスタントコーヒー等に用いられる．

\subsection{\large{コーヒーの起源と伝搬の歴史}}
コーヒーノキ（アラビカ種）はエチオピアのアビシニア高原にて発見された．その後，アラビアに伝播しオランダの貿易商人達の手によってアフリカやアジアへと広がっていき，商業用生産が活発になる．
アフリカやアジア各国にコーヒーが広がり，フランスに至ると，とある海軍兵士がコーヒーの苗木を当時フランス領であったマルティニーク島に持ち出すことになる．こうしてラテンアメリカにもコーヒーは広がり，温暖でコーヒーの栽培に特に適した北回帰線と南回帰線を挟むコーヒーベルトにおいて栽培は進んでいった．現代でも，コーヒーベルト各国はコーヒーのシェアの多くを占めている．グアテマラ・ブラジル・コロンビア・スマトラなどは，コーヒーを普段飲まない人でも聞き馴染みのある生産地である．高品質なコーヒーを淹れる上で，アラビカ種を使用することはもはや前提といっても過言ではないシェアを誇るが，近年では，耐病性向上の観点からハイブリット種の開発も行われている．

\newpage
\subsection{\large{コーヒーの流行について}}
ここでは，コーヒーの流行を時代別に説明する際に使われる，ウェーブという表現について説明する．
コーヒーはその時代ごとに求められる姿を変え，ファーストウェーブ（第一の波），セカンドウェーブ（第二の波），サードウェーブ（第三の波）へとシフトしていく．
このウェーブという表現は，明確な時間の括りを示すものではないが，流行りの移り変わりとしてコーヒーを語る上で多く用いられる．
\subsubsection{\large{ファーストウェーブ}}
ファーストウェーブ（第一の波）の期間は，1800年代後半\UTF{FF5E}1960年頃と言われている．
この流行はコーヒーの大量消費時代であり，真空保存パックの発明や，インスタントコーヒーが発売された時代でもある．
真空保存パックの発明は，コーヒーの保存期間を劇的に延長し，地方だけでなく大都市でも新鮮なコーヒーが飲めるようになった．
インスタントコーヒーの発明は，コーヒーを楽しむことをより手軽なこととした，第一次・第二次世界大戦においても多くの兵士が愛飲したと言われている．
しかしその反面，この時代のコーヒーは風味がとても乏しく，粗悪品が多く出回る時代でもあった．
\subsubsection{\large{セカンドウェーブ}}
セカンドウェーブ（第二の波）の期間は，1960年頃〜2000年頃と言われている．
ファーストウェーブの際に，一般的かつ手軽な飲み物として普及が進んだコーヒーであったが，普及が進むとともに劣悪な品質が問題化した．
そして，STARBUCKSなどのシアトル発祥のカフェを代表とする，味にフォーカスした流行が起こる，それがセカンドウェーブである．
コーヒーそのものだけでなく，カフェラテなどのエスプレッソドリンクもシアトル系カフェの台頭とともに普及した．
\subsubsection{\large{サードウェーブ}}
サードウェーブ（第三の波）の期間は，2000年頃〜現在も続くと言われている．
セカンドウェーブの際に，品質についての意識が向上したことを皮切りに，高品質かつそのコーヒーの生まれや，農園，淹れ方，加工法などが重視される流行が訪れる事となる．それがサードウェーブコーヒーである．
コーヒーの抽出技術を競う大会や，カップオブエクセレンスと呼ばれるその年のコーヒーで最高品質の物を決める評議会が開催されるなど，一杯の価値にフォーカスされている流行である．
また，昔から日本のカフェで行われてきたハンドドリップは，日本でこそ当たり前の光景だったものの，海外では目新しいものであり，この流行とともに注目を集めていくこととなる．
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{抽出方法と抽出器具について}}
%本章では，基本的な抽出方法や抽出器具を説明する．

\subsection{\large{抽出方式}}
コーヒーの抽出器具は，それぞれ特有の抽出方式を持っているが，大きく区分したものが以下のものとなる．
\subsubsection{\large{浸漬式}}
浸漬式は，名前の示す通りコーヒー豆をお湯や水に浸し，適切な時間漬けておくことで，風味を引き出す抽出方式である．
他の方式に比べ，コーヒーの油分をしっかりと抽出できるため，豆本来の味わいを表現しやすいことがメリットである．
コーヒーは抽出を過剰に行った場合，雑味やエグ味まで抽出されてしまうため，抽出にかかる時間を適切に管理することが，浸漬式では特に重要である．
比較的長時間の抽出になるため，粗挽きの豆を使用するのが一般的である．特に水出しの場合，お湯に比べ抽出スピードが遅いため，丸一日時間を要する場合もある．
\subsubsection{\large{透過式}}
透過式とは，ペーパーフィルターなどを介し，豆とお湯が分離しサーバーに落とす抽出方式である．
浸漬式に比べ，粉末感がほとんど無く，あっさりめの味わいに仕上がることがメリットである．
抽出者により味わいが大きく変わることも特徴であり，自由な表現ができるが，テクニックを身につけるための時間が長いことがデメリットでもある．
\subsubsection{\large{高圧抽出式}}
高圧抽出式は，お湯を浸したコーヒー豆に高い気圧をかけることにより，一気に味を抽出する方式である．
高い圧力をかけるため，風味を濃縮した味わいになりやすいことが，他の抽出方法にないメリットである．
その反面，高圧をかけるこの抽出方式は，器具自体が大きく機械式であることがほとんどのため，事前知識やメンテナンスに割く時間が多いことがデメリットである．
\subsubsection{\large{真空濾過式}}
真空濾過式はサイフォンに代表される抽出方式であり，意図的に準真空状態を作り出し抽出を行う方式である．
この方式を採用している器具は少ないため，メリットやデメリットは後述するサイフォンという器具の詳細と同様となる．
同じく真空状態を意図的に利用する器具で，CLOVERと呼ばれる浸漬式と真空バキュームを組み合わせた器具も存在する．
\newpage
\subsection{\large{抽出器具}}
\subsubsection{\large{コーヒープレス}}
コーヒープレスは，浸漬式に分類される抽出器具である．
実際の写真を図\ref{fig:press}に示す．
豆をお湯に漬け込み，味を染み出させたのちに，フィルターで濾すことで抽出を行う．
仕上がりは．多少の粉末感を残すものの，濃厚でまろやかな味わいである．
ステンレスフィルターを使用するため，コーヒーオイルをそのまま味わえること，コーヒー豆本来の味が楽しめることがメリットである．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/p4.pdf}
 \end{center}
  \caption{コーヒープレス}
  \label{fig:press}
\end{figure}


\newpage

\subsubsection{\large{プアオーバー}}
プアオーバーは，透過式に分類される器具であり，別名ハンドドリップとも呼ばれている．
実際の写真を図\ref{fig:over}に示す.
フィルターの上に挽いた豆を置き，お湯を注ぐことよって，下部のグラスサーバーにコーヒーを抽出していく．
ペーパーフィルターを介しているため，出来上がりは，粉末感は殆どなくクリーンな味わいになりやすいメリットがある．
また，お湯の注ぐタイミングや蒸らしの時間の掛け方などにより，様々な流派が存在し，淹れた人によって大きく風味が変化する事も特徴の一つである．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/set.pdf}
 \end{center}
  \caption{プアオーバー}
  \label{fig:over}
\end{figure}

\newpage

\subsubsection{\large{エスプレッソ}}
エスプレッソは，高圧抽出式に分類されるコーヒーの飲み方である．
実際に抽出する器具はエスプレッソマシンと呼ばれており，水蒸気やピストンなどで圧力をかけ，短い時間で抽出を行う．
実際の器具の写真を図\ref{fig:esp}に示す．
自動式・半自動式・ピストン式など様々なエスプレッソマシンが存在するが，使用者自身でフィルターに豆を押し込み，機械によって気圧をかける半自動式が最も一般的である．
仕上がりは極めて濃厚であり，そのままの状態で飲む以外にも，ミルクを追加しカフェラテ・カプチーノとして提供されることが多い．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/e1.pdf}
 \end{center}
  \caption{エスプレッソマシン}
  \label{fig:esp}
\end{figure}

\newpage

\subsubsection{\large{ソロフィルター}}
ソロフィルターは，カフェ等ではあまり提供されず，明確な抽出方式はないが，コーヒーを初めて淹れる人でも簡単に抽出でき，入門用に最適な器具の一つである．
実際の器具の写真を図\ref{fig:solo}に示す\cite{Railshon10}.
ステンレスフィルターの上に挽いたコーヒー豆を置いた後，複数の極細の穴があるパーツに規定量のお湯を注ぐだけで，適切な湯量が豆に注がれ続ける．
容量は1杯分のコーヒー豆しか入らないため，大人数分のコーヒーを抽出するには不向きだが，粉末感の殆どない高品質なコーヒーを手軽に味わえるため，
コーヒーを学び始めの人や，朝の忙しい時間でも簡単に抽出することができる．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/gazou6.pdf}
 \end{center}
  \caption{ソロフィルター}
  \label{fig:solo}
\end{figure}

\newpage


\subsubsection{\large{サイフォン}}
サイフォンは，真空濾過式に分類される抽出器具である．
科学の実験器具のような形状をした抽出器具であり，数ある抽出器具の中でも特に見栄えの良い器具として，注目を集めている．
実際の器具の写真を図\ref{fig:siphon}に示す\cite{Railshon11}.
お湯を熱したことによる蒸気圧を使用し，真空に近い状態を作り出すことで，コーヒーが器具の内部を上下し，フィルターを通して濾過される．
日本の喫茶店でも多く取り入れられていたため，馴染みの深い抽出器具でもある．
他の器具に比べ，風味が豊かになりやすい．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/s1.pdf}
 \end{center}
  \caption{サイフォン}
  \label{fig:siphon}
\end{figure}

\newpage

\subsubsection{\large{クレバードリッパー}}
クレバードリッパーは，浸漬式と透過式を合わせた抽出器具である．
実際の器具の写真を図\ref{fig:cl}に示す\cite{Railshon99}.
浸漬式と同様にコーヒー豆をお湯に浸し，ペーパーフィルターを透過することで，豆とお湯を分離する．
味わいは，浸漬式のマイルドさと，透過式のスッキリさを併せ持っている．
一度に多くのコーヒーを抽出できるほか，プアオーバーのような複雑な工程を踏まないため，比較的簡単に抽出を行うことができる．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=70mm]{figure/c.pdf}
 \end{center}
  \caption{クレバードリッパー}
  \label{fig:cl}
\end{figure}

\newpage

\subsubsection{\large{エアロプレス}}
エアロプレスは，その名の通り空気圧を使用した抽出器具である．
実際の器具の写真を図\ref{fig:aero}に示す\cite{Railshon12}．
開発されたのは2005年であり，数多くの抽出器具の中でも特に直近に提案された器具である．
注射器のような形状をしており，利用者自身が器具を押し込むことによって，空気圧を調整し抽出を行う．
抽出時間が短いこと，味わいが濃厚であることが特徴である．
2005年という直近の開発でありながら，様々なカフェで提供されている他，エアロプレスに特化した，抽出技術を競う大会が開催されたりと，シェアを順調に伸ばしている．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=70mm]{figure/a1.pdf}
 \end{center}
  \caption{エアロプレス}
  \label{fig:aero}
\end{figure}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{コーヒーの学習について}}
\subsection{\large{コーヒー抽出の学習方法}}
コーヒー抽出の学習方法は，他の学問と同様に様々な学習スタイルが存在する．

近年では，多くの個人経営カフェや，チェーン店においてもコーヒーセミナーという形で，実践を伴った学習ができる．
このセミナーという形態のメリットは，実際の抽出を直近で見れることと，プロが積み上げてきた抽出メソッドを知ることができることにある．
それらの情報は，Web上に上がることが稀なため，コーヒー学習をさらに深めたい人に需要が高い．

個人学習においては，抽出に関することに主題を置いた書籍が多数出版されている他，インターネット上で抽出レシピやコツなどを簡単に閲覧することができる．
特にWebページを用いた学習方法は，どの学習方法よりも気軽に学習できることがメリットである．
また，様々な抽出器具や抽出方法を閲覧することができるため，自分にあったコーヒーの楽しみ方を模索しやすいというメリットもある．
\subsection{\large{コーヒーの学習が可能なWebサイトついて}}
インターネット上のWebサイトでは，コーヒーの基本知識から，実際の抽出方法に至るまで多くの情報が閲覧できる．
個人で運営されているWebサイトだけでなく，コーヒー業界の大手であるSTARBUCKSや，UCC，TULLY'Sなどの企業も自社ページで，器具ごとの抽出手順や実際の抽出動画を公開している．
STARBUCKSは，自社のコーヒー豆の紹介をメインにしており，抽出に関しては，複数の器具の説明を図と文字で説明している\cite{Railshon4}．
TULLY'Sは，他社と同様に図解で抽出方法を説明しているほか\cite{Railshon5}，自社ページ以外にもYouTubeで美味しい淹れ方の動画を掲載している\cite{Railshon6}．
UCCは，コーヒーの抽出に限らず，豆の選び方や焙煎の種類など，他の企業に比べ包括的で，辞典のようなWebページを掲載している\cite{Railshon7}．
抽出に関しては，抽出手順が図解されているほか，動画で確認をすることができる．また，他社に比べて理論的な説明が多くみられる．
\subsection{\large{既存の音声認識可能なWebレシピについて}}
既存の音声認識可能なWebレシピで特に有名なものとして，クックパッドとmacaroniが挙げられる．
クックパッドは，料理レシピの閲覧・投稿が可能であり，調理手順をステップごとに確認することができる．
元々は音声認識は実装されていなかったが，Amazonが発売している，スマートスピーカー「Amazon Echo」のクックパッドスキルを使用することで，音声認識が使用できる．
機能は主にレシピの検索や読み上げであり，画面ではなく音声を聞きながらの調理をすることになる．
macaroniは，スマートフォンアプリで使用できるWebレシピである．
こちらは，調理動画を閲覧する際に音声認識が可能であり，「サイセイ」，「マキモドシ」などの発音で，動画の再生をコントロールできる．

双方ともに，料理レシピがメインコンテンツであり，コーヒーに関するレシピはほとんど掲載されていない．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{プログラミング言語と音声認識ついて}}
\subsection{\large{HTML・CSSとは}}
HTML(Hyper Text Markup Language)とは，プログラミング言語の1つである．主にWebページを作成する際に使用される言語である，
単なる文字の集まりである文章に，見出し・ボタン・リストなどの役割を指定し，コンピュータに認識させることができる．
現存するほとんどのWebページがHTMLによって構造を作られている．

CSS(Cascading Style Sheets)とは，HTMLに記載された役割を持つ文章に対し，サイズ指定を行うことや，文字色の変更，配置を調整することができる言語である．
HTML単体の記述では，単調な文章表記やレイアウトになってしまうため，多くのWebサイトでCSSを用いたデザイン調整が行われている．
使用方法は，HTMLファイルから別のCSSファイルを読み込むというだけでなく，HTMLファイル中に直接CSSを書くこともできるなど，用途に合わせた柔軟な記述ができるようになっている．

\subsection{\large{音声認識とは}}
音声認識とは，人間が発する声をコンピュータ上で解析を行い，テキストとして認識する技術である．
\subsubsection{\large{音声認識の仕組み}}
音声認識の仕組みは利用するサービスによって異なるほか，その時代によっても音声認識の方法論が移り変わっている．
河原（2018）の，音声認識の方法論の変遷にて記載されている表を，表\ref{tb:onsei}に示す\cite{Railshon8}．
この表1を見ると現在の音声認識の方法論は4.5世代にあたり，ニューラルネットワークの利用が主流になっていることがわかる．
ニューラルネットワークはいわば機械学習の類であり，それらを応用することで音声認識を成し遂げている．
実際に，Google社の手がける音声認識サービス「Google Cloud Speech API」においてもニューラルネットワークモデルが利用されていることが述べられている\cite{Railshon2}．


\subsubsection{\large{WebSpeechAPI}}
WebSpeechAPIとは，JavaScriptAPIの1つである．
JavaScriptとWebブラウザのみで，音声の合成や音声認識を可能にする．
音声の合成は入力した文字を機械側に発音させる機能であり，音声認識は音声をテキストとして入力する機能である，
本Webアプリケーションの音声認識はこのWebSpeechAPIを使用している．

\newpage
\begin{table}[h]
\begin{center}
\caption{音声認識の方法論の変遷(河原,2018)}
\begin{tabular}{| l | c | c | c |}  \hline
第1世代  & 1950\UTF{FF5E}1960年代 & ヒューリスティック                 \\ \hline
第2世代  & 1960\UTF{FF5E}1980年代 & テンプレート (DP マッチング, オートマトン) \\ \hline
第3世代  & 1980\UTF{FF5E}1990年代 & 統計モデル (GMM-HMM, N-gram)   \\ \hline
3.5世代 & 1990\UTF{FF5E}2000年代 & 統計モデルの識別学習                \\ \hline
第4世代  & 2010年代      & ニューラルネット (DNN-HMM, RNN)   \\ \hline
4.5世代 & 2015年\UTF{FF5E}      & ニューラルネットによる End-to-End    \\ \hline
\end{tabular}
\label{tb:onsei}
\end{center}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{本研究で開発するWebレシピの概要}}

\subsection{\large{実装機能}}
コーヒーの抽出は目的に合わせ抽出器具を使い分けるため，それぞれの特徴を踏まえた上で器具の選定を行うことが重要である．
そのため，本研究で開発したWebレシピのページは，「抽出器具選択画面」，「レシピ閲覧画面」の二段階で構成している．
抽出器具選択画面において，利用者はそれぞれの器具の特徴や風味の違いを理解し，レシピ閲覧画面で実際の抽出をサポートする．
本Webレシピのページ構成を図\ref{fig:kousei}に示す．

本研究で実装する機能は，「コーヒーの専門性の高いWebレシピの機能」と「音声認識」である．
「コーヒーの専門性の高いWebレシピの機能」は，コーヒーの抽出器具ごとの情報や，その組み立て方および抽出手順である．
上記に述べたとおり，抽出をする際に使用する器具の特徴をあらかじめ理解していることはとても重要である．
抽出手順においても器具ごとに異なるため，そのステップごとに個別のページを用意し，順に解説を行う．
「音声認識」は，抽出ステップ間の移動を行う際に使用する．
実際の抽出中は両手が塞がることが多く，ページ移動のボタンを押せないことが予期されるため，ボタンの他に音声認識でもページを移動できるようにする．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=100mm]{figure/kousei.pdf}
 \end{center}
  \caption{ページ構成}
  \label{fig:kousei}
\end{figure}

\newpage


\subsubsection{\large{抽出器具選択画面}}
「抽出器具選択画面」では，レシピを閲覧する抽出器具を選択する．
実際の抽出器具選択画面を図\ref{fig:kigusentaku}に示す．

この画面では，抽出方式の異なる3つの代表的な抽出器具と，ソロフィルターを含めた4種類を選択できる．
プアオーバー（透過式），コーヒープレス（浸漬式），エスプレッソ（高圧抽出式）は，日本で特に馴染みの深いコーヒーの抽出方法であり，様々なカフェで提供されていることから選択した．
ソロフィルター（より手軽な入門向け）は，カフェ等ではあまり提供されないが，コーヒーを初めて淹れる人でも簡単に抽出でき，入門用の器具の一つとして選定した．

「レシピを見る」を選択することで，「レシピ閲覧画面」へと移動する．

「レシピ閲覧画面」では，実際に器具ごとのコーヒー抽出レシピを閲覧できる．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=130mm]{figure/soturon2.pdf}
 \end{center}
  \caption{抽出器具選択画面}
  \label{fig:kigusentaku}
\end{figure}

\newpage

\subsubsection{\large{レシピ閲覧画面}}
「レシピ閲覧画面」では，実際に器具ごとのコーヒー抽出レシピを閲覧できる．
レシピ閲覧画面の構成を図\ref{fig:mokuji}に，実際のレシピ閲覧画面を図\ref{fig:recipieturan}に示す．

ページは抽出ステップごとに分割している．
1つのステップ毎に，個別の画像と説明文を表示し，記載されている指示に従うことで，抽出を行うことができる．
ステップ間は，画面上部のボタンを押すことで移動が可能であるほか，音声認識も実装している．
画面下部の「音声認識を開始する」ボタンを押すことにより，音声認識処理が開始し，「次へ」・「戻る」の発音で，ステップ間の移動が可能である．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=130mm]{figure/mokuji.pdf}
 \end{center}
  \caption{レシピ閲覧画面の構成}
  \label{fig:mokuji}
\end{figure}

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=130mm]{figure/soturon1.pdf}
 \end{center}
  \caption{レシピ閲覧画面：抽出}
  \label{fig:recipieturan}
\end{figure}

\newpage

\subsection{\large{音声認識の実装について}}
はじめに，音声認識機能の全体の流れを説明する．
図\ref{fig:onsei}に示すように，音声認識によって得られた音声データは，WebSpeechAPIによって外部処理が行われ，テキストに変換される．
変換されたテキストが特定の文字「次へ」，「戻る」であった場合，それぞれに合わせた関数を呼び出し，ページ移動を行う．

音声認識の実装には2つのJavaScriptファイル「seramic.js」と「page.js」を使用する．
「seramic.js」は，主に音声認識を継続的に実行するJavaScriptファイルである．
「page.js」は，ページ移動を実装するJavaScriptファイルである．

「seramic.js」は，宗定(2014)の記事に述べられているソースコードを元に作成した\cite{Railshon9}．
元のソースコードは音声認識を継続して行い，認識した音声をテキストとして表示するプログラムである．
本開発ではボタンの押下，または特定の音声によって，ページ移動を行う機能を追加した．

音声認識が行われると， recognition.onresultが処理を始める．
function (e)のeには，実際の音声認識データが含まれている．
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
recognition.onresult = function (e) {
 \end{lstlisting}

認識された音声は，テキストとして変数interimTextに格納される．
e.resultsは過去の認識データも含めた，全てのデータが含まれている．
[e.results.length-1]が最新のデータになっており，[0]の中のtranscript内に，実際に認識したワードが格納されている．
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
interimText = e.results[e.results.length-1][0].transcript;
 \end{lstlisting}
 
 変数interimTextに格納されたテキストが「次へ」の場合，page.next();が実行され，「戻る」の場合，page.prev();が実行される．
 
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
if (interimText === "次へ") page.next();
else if (interimText === "戻る") page.prev();
 \end{lstlisting}

また，図\ref{fig:recipieturan}の上部にある「前のステップ」「次のステップ」ボタンを押下することでも同様の関数が実行される．
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
document.querySelector('#next_button').addEventListener('click', ()
=> { page.next(); });
 document.querySelector('#prev_button').addEventListener('click', () 
=> { page.prev(); });
 \end{lstlisting}
 
続いてページ移動の説明をする．
前述の通り，ページの移動は「page.js」が行う．

numberは1枚目のページを0，2枚目のページを1とした時の，現在のページ番号である．
this.page sizeは，ページの総数であり，numberと数値の差を合わせるため，1を引く．
next()では，現在のページ数がページの総数より少なかった場合，prev()では，0より現在のページ数が大きかった場合，処理が起こる．
this.pages[number]には，現在のページのidが入っており，next()では次のページのidを．prev()では前のページのidをchange()に渡している．
 \begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
  next() {
    let number = this.pages.indexOf( this.now );
    if( number < this.page_size-1 ) {
      let a = document.querySelector( this.now );
      this.change( this.pages[number+1]);
    }
  }
    prev() {
    let number = this.pages.indexOf( this.now );
    if( 0 < number ) {
      let a = document.querySelector( this.now );
      this.change( this.pages[number-1]);
    }
  }
 \end{lstlisting}
 
 
change()は画面の表示範囲を設定することで，ページ移動を行なっている．
下記のコードの2-5行目において，全てのページを非表示にし，6行目にて，指定のidのページのみを表示させている．
最後の7行目では，現在のページidを記録している．
 
 \begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
  change( page ) {
    let pages1 = document.querySelectorAll('.page');
    for( let p of pages1 ) {　
      p.style.display = "none";
    }
    document.querySelector( page ).style.display = "block";
    this.now = page;
  }
 \end{lstlisting}

前述の通り，ページの移動は，同HTMLファイル内の表示範囲を変えることで実装した．
そうすることで，繰り返しブラウザからマイク使用の許可を求められることが無いほか，スムーズな画面切り替えを実現している．
なお，この音声認識はGoogle Chromeのみで対応している．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=100mm]{figure/onsei.pdf}
 \end{center}
  \caption{音声認識の流れ}
  \label{fig:onsei}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{結言}}

コーヒーは，1章にて述べた通り，長い年月をかけて愛され，世界の人々を魅了してきた．
また，その生産に当たっても，農家・バイヤー・焙煎士・加工者など多くの人々の手に渡りながら世界を巡り，最終的に消費者の元に訪れる．
そのような長い過程を経たとしても，最終的には抽出次第で味は如何様にも変化する．
難しいと感じる人も多いだろうが，そこがコーヒーの魅力でもあり，人々を惹きつける要因の1つだろう．

しかし，抽出手順や器具ごとの特徴の違いなどから学習の難易度が高くなり，コーヒーを淹れることの敷居も高くなっている実情は，その楽しみを阻害するだけでなく，新たなコーヒーの楽しみ方を模索する機会を失ってしまっている問題点がある．
また実際の抽出中は両手が塞がってしまうのに対し，現存のWebレシピでは音声認識を実装していない，もしくはコーヒーの専門性が低いという問題点があった．

そこで本研究では，様々な抽出器具のレシピが閲覧可能であり，音声認識によってページ移行が可能なWebレシピを開発し，問題点の解決に取り組んだ．

今回の開発で，気軽にコーヒー抽出を行うことのサポートとして第一歩を踏み出せたと考えている．
今後このような，抽出アシストツールがより普及し，コーヒーを抽出できるようになることを期待している．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section*{謝辞}
本研究の遂行及び本論文の作成にあたり，須田研究室の仲間に多くの手助けを頂きました，深く感謝の意を表します．
そして，本論文の作成にあたり，多大なる御指導及び御助言を頂きました須田宇宙准教授に深く感謝の意を表します．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%参考文献
\newpage
\section{\large{参考文献}}\label{参考文献}
\begin{thebibliography}{9}
%\bibitem{kawahara}名前, ``書籍名'', 出版, Vol71, No11, 年, pp197-203
\bibitem{Railshon1} 
全日本コーヒー協会，``日本のコーヒー消費と株価''，\url{http://coffee.ajca.or.jp/wp-content/uploads/2019/04/data00c_2019_04.pdf}\\
\bibitem{Railshon10} 
スターバックス コーヒー ジャパン，``スターバックス　ソロフィルター'，\url{https://www.starbucks.co.jp/brewing/dripper/4524785211094/}\\
\bibitem{Railshon11} 
HARIO，``テクニカ 3人用''，\url{https://www.hario.com/seihin/productdetail.php?product=TCA-3}\\
\bibitem{Railshon99} 
LILO COFFEE ROASTERS，`E.K.INT'L CLEVER DRIPPER・クレバードリッパー L''，\url{https://lilocoffee.thebase.in/items/158429103}\\
\bibitem{Railshon12} 
小川珈琲，``エアロプレスコーヒーメーカー''，\url{https://www.oc-ogawa.co.jp/products/tools/aeropress/}\\
\bibitem{Railshon4} 
スターバックス コーヒー ジャパン， ``おいしいコーヒーをいれるコツ''， \url{https://www.starbucks.co.jp/howto/coffee/skill.html}\\
\bibitem{Railshon5} 
タリーズコーヒージャパン ， ``タリーズ流 コーヒーの美味しい淹れ方''， \url{https://www.tullys.co.jp/quality/coffee_tips/coffee_tips06.html}\\
\bibitem{Railshon6} 
Youtube ， ``タリーズ流　ハンドドリップの淹れ方！ホットコーヒー篇''， \url{https://www.youtube.com/watch?v=io9JiBfEySg}\\
\bibitem{Railshon7} 
UCC ， ``おいしいコーヒーの淹れ方"， \url{https://www.ucc.co.jp/enjoy/brew/}\\
\bibitem{Railshon8} 
河原達也 ， ``音声認識技術の変遷と最先端"， \url{http://sap.ist.i.kyoto-u.ac.jp/members/kawahara/paper/ASJ18-7.pdf}\\
\bibitem{Railshon2} 
google ， ``Cloud Speech-to-Text''， \url{https://cloud.google.com/speech-to-text/?hl=ja}\\
\bibitem{Railshon9} 
宗定 洋平， ``[HTML5] Web Speech APIに入門'， \url{https://www.yoheim.net/blog.php?q=20140701}\\

%\bibitem{Railshon9} 
%株式会社ドレミ楽譜出版社 橋本晃一 編著，``中級レベルで弾けるクラシック名曲ピアノ曲集''，1994年1月初版発行，2007年2月20日第7版発行，pp26-27\

\end{thebibliography}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%付録
\newpage
\newgeometry{left=2cm,bottom=2cm}
\appendix
\section{作成したプログラム}

\section*{index.html}
\label{index.html}
\listinginput{1}{program/index.html}
\newpage

\section*{kigusentaku.html}
\label{kigusentaku.html}
\listinginput{1}{program/kigusentaku.html}
\newpage

\section*{seramic.html}
\label{seramic.html}
\listinginput{1}{program/seramic.html}
\newpage

\section*{index.css}
\label{index.css}
\listinginput{1}{program/css/index.css}
\newpage

\section*{seramic.css}
\label{seramic.css}
\listinginput{1}{program/css/seramic.css}
\newpage

\section*{page.js}
\label{page.js}
\listinginput{1}{program/js/page.js}
\newpage

\section*{seramic.js}
\label{seramic.js}
\listinginput{1}{program/js/seramic.js}
\newpage



\end{document}