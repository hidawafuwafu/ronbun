% !TEX encoding = UTF-8 Unicode

\documentclass[a4j,12pt]{jsarticle}
\usepackage[dvipdfmx]{graphicx}
\usepackage{newtxtext} % アルファベットなどをTimesNewRomanで
%\usepackage{newpxtext} % アルファベットなどをPalatinoで
% 両方共コメントアウトするとComputer Modernで

\usepackage{listings}
\usepackage{okumacro}
\usepackage{graphicx}
\usepackage{url}
\usepackage{tabularx}
\usepackage{colortbl}
%\usepackage{float}
\usepackage{makeidx}
\usepackage{fouriernc}
\usepackage[deluxe]{otf}
\usepackage{mediabb}
\usepackage{amsmath}
\usepackage{moreverb}
%\usepackage{verbatim}

\usepackage{verbatim}
\usepackage{multirow}

% \usepackage[margin=2cm]{geometry}
\usepackage[top=20truemm,bottom=20truemm,left=30truemm,right=20truemm]{geometry}

\usepackage{dcolumn}
\usepackage{ascmac}
\usepackage{color}
\usepackage{eclbkbox}
\usepackage{itembkbx}
\usepackage{enumerate} %箇条書きを装飾する際に使う
\usepackage{multicol}
% 自分で追加
\usepackage{comment}%複数行コメントアウト
\usepackage{multirow}%表結合
\usepackage{here} %図や表などを強制的に出力
\usepackage{fancybox} %四角で囲む
\usepackage{boxedminipage} %箇条書きを四角で囲む
\usepackage{caption} %キャプションの設定
\usepackage{longtable} %表がページをまたがるときの処理
\usepackage{slashbox} %表に斜線を入れる
% \usepackage{emathT} %表に斜線を入れる
\usepackage{framed} %箇条書きを枠で囲む
\newcolumntype{I}{!{\vrule width 1.5pt}}% 縦線の一部を太くする(Iで指定する)
% 横線の一部を太くする(wlineで範囲を指定する）
\newlength\savedwidth
\newcommand{\wcline}[1]{\noalign{\global\savedwidth\arrayrulewidth\global\arrayrulewidth 1.5pt} \cline{#1}
\noalign{\global\arrayrulewidth\savedwidth}}
\usepackage{lscape} % 表を横向きに表示

% 数字を丸で囲む
\def\MARU#1{\leavevmode \setbox0\hbox{$\bigcirc$}%
\copy0\kern-\wd0 \hbox to\wd0{\hfil{#1}\hfil}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\makeatletter % プリアンブルで定義開始
\renewcommand{\presectionname}{第}
\renewcommand{\postsectionname}{章}
\renewcommand{\appendixname}{付録}


%章，節，項の文字サイズ
\def\section{\@startsection {section}{1}{\z@}{3.5ex plus -1ex minus -.2ex}{2.3 ex plus .2ex}{\Large\bf}}
\def\subsection{\@startsection {subsection}{1}{\z@}{3.5ex plus -1ex minus -.2ex}{2.3 ex plus .2ex}{\Large\bf}}
\def\subsubsection{\@startsection {subsubsection}{1}{\z@}{3.5ex plus -1ex minus -.2ex}{2.3 ex plus .2ex}{\large\bf}}


\usepackage{caption} %キャプション文字サイズ（大）
\captionsetup[figure]{font=normalsize}
\captionsetup[table]{font=normalsize}
\captionsetup[equation]{font=normalsize}

% 図の番号を"<章.節の番号> - <図の番号>" へ
\renewcommand{\thefigure}{\thesubsection-\arabic{figure}}
% 表の番号を"<章.節の番号> - <表の番号>" へ
\renewcommand{\thetable}{\thesubsection-\arabic{table}}
% 数式の番号を"<章.節の番号> - <数式の番号>" へ
\renewcommand{\theequation}{\thesubsection-\arabic{equation}}

% 章と節が進むごとに図の番号をリセットする
\@addtoreset{figure}{subsection}
% 章と節が進むごとに表の番号をリセットする
\@addtoreset{table}{subsection}
% 章と節が進むごとに数式の番号をリセットする
\@addtoreset{equation}{subsection}

% 章と節が進むごとに注釈の番号をリセットする
% \@addtoreset{footnote}{subsection}

% 注釈の設定
\renewcommand{\thefootnote}{\fnsymbol{footnote}}


\makeatother % プリアンブルで定義終了


%%%%%%% グラフックパス
\graphicspath{{fig/}}
 
\makeindex
\begin{document}

% フォントサイズ・行間
\fontsize{20pt}{15pt}\selectfont

% 表紙
\thispagestyle{empty} % ページ番号削除

\begin{center}
\huge
\vspace*{\stretch{2}}

2019年度　卒業論文\\[50pt]
\HUGE

コーヒー抽出に関する音声認識可能な\
Webレシピの開発\\
\huge
\vspace*{\stretch{6}}
指導教員　須田 宇宙 准教授\\[40pt]
千葉工業大学 情報ネットワーク学科\\[10pt]
須田研究室\\[60pt]
1632130 \hspace{50pt} 氏名　肥田雄也\\[75pt]
\end{center}

\begin{flushright} 
\huge
提出日　2020年1月25日
\vspace{\stretch{2}}
\end{flushright}

\newpage
\thispagestyle{empty} % ページ番号削除
%\input{input0}

% フォントサイズ・行間
\fontsize{11pt}{15pt}\selectfont

% 目次
\pagenumbering{roman}
\setcounter{page}{1} % ページ番号1
\setcounter{tocdepth}{3}

\newpage
\tableofcontents
%\pagestyle{empty}

%\thispagestyle{empty} 

\newpage
%\thispagestyle{empty}
\listoffigures

\newpage
%\thispagestyle{empty}
\listoftables






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%ここから本文
\newpage
\pagenumbering{arabic}
\section{緒言}
\setcounter{page}{1} % ページ番号1
「悪魔のように黒く、地獄のように熱く、天使のように純粋で、愛のように甘美である。」これはフランスの外交官である，シャルル＝モーリス・ド・タレーラン＝ペリゴールが遺したコーヒーの名言である．
コーヒーはただの飲料物でありながらも，長い年月をかけて愛され，世界の人々を魅了してきた．
%音楽は国境を超えると言われている．音は人間の感覚に直接刺激を与え，その形は国を超えて愛されるものである．その結果，日々世界中でコンサートやライブが開催され，多くの客を動員している．

それは日本も例外ではない．
江戸時代初期に長崎の出島に持ち込まれた際は，一部の人間しか飲用はできなかったが，明治時代に文明開化が起きるとみるみるうちに一般層に普及していった．
現代では，国際機関コーヒー機関（ICO）の「世界の国別コーヒー消費量」で4位を記録しているほどである．
%また，音楽は体を動かす必要がないため，老若男女多くに好かれるものであるといえる．音楽を生業にする人のみならず，趣味として音楽に関与することを上げる人も多くその人気は高い．さらに，誰もが幼少期から歌や楽器演奏等，様々な形で音楽と関わっており，音楽は多くの人にとって身近なものであることが伺える．

%楽器を演奏する人も多くいるがその中でもピアノが人気であるといえる．ピアノは歌や他の楽器との相性がいいことから誰もが一度は関わったことがあるだろう．
%私はこの度の研究に際して，ピアノをテーマにした研究に興味を持った．
私はこの度の研究に際して，コーヒーをテーマにした研究に興味を持った．
%日本ではピアノの奏者が約200万人いると言われており，それに従い個人から大手まで多くのピアノ教室が存在している．

しかし，初心者にとってピアノの楽譜は難易度が高く，楽譜が読めないことで挫折する人が多い.

そこで，ピアノ教室では各音符に手書きで音階を書き込む工夫がされているが，指導者にとって時間的コストがかかっていることが問題点としてあげられる.
その問題を解決するために，本研究では実際に音階付加システムを開発し，ピアノ指導者に評価してもらうことを目的とする．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{コーヒーについて}}
本章では，コーヒーの歴史や流行について説明する．
\subsection{\large{コーヒーとは}}
コーヒーとは，コーヒーノキという樹木から採取される種子を焙煎し，お湯等で成分を抽出した飲料物である．主に北回帰線と南回帰線を挟むコーヒーベルトと呼ばれる地域で栽培されており，数百種類の品種が存在する．商業生産としては，高品質であるが栽培の難しいアラビカ種がおよそ60％前後，品質はアラビカ種に劣るが耐病性に優れ，大量生産向きであり缶コーヒーなどに用いられるロブスタ種がおよそ40％前後を占める．抽出方法についても日本の純喫茶でよく見られるプアオーバーや，サイフォンの他に，フレンチプレス，エスプレッソ，ソロフィルターなど，その目的や表現したい風味に従い，多くの数が存在し使い分けられている．



%ピアノとは，弦をハンマーで叩くことで発音する弦楽器の一種である．88個の鍵があり，鍵を押すことで対応する弦をハンマーが叩き，音が発生する仕組みである．打楽器と弦楽器の特性を持ち合わせていることから打弦楽器に分類される．その音域は非常に広く，オーケストラの全音域よりも広い．汎用性が高く，演奏目的のみならず音楽教育や作曲等，様々な目的で利用される．そのためピアニストのみならず，他の楽器の演奏者や声楽家，作曲家，指揮者，教育指導者等様々な場面でピアノ演奏技術が必要とされる．
%ピアノにはいくつかの種類があり，グランドピアノ・アップライトピアノ・エレクトリックピアノ・電子ピアノなどそれぞれの目的に応じて使い分けることが可能である．
\subsection{\large{コーヒー(アラビカ種)の起源と伝搬の歴史}}
コーヒー（アラビカ種）はエチオピアのアビシニア高原にて発見された．その後，アラビアに伝播しオランダの貿易商人達の手によってアフリカやアジアへと広がっていき，商業用生産が活発になる．
アフリカやアジア各国にコーヒーが広がり，フランスに至ると，とある海軍兵士がコーヒーの苗木を当時フランス領であったマルティニーク島に持ち出すことになる．
こうしてラテンアメリカにもコーヒーは広がり，温暖でコーヒーの栽培に特に適した北回帰線と南回帰線を挟むコーヒーベルトにおいて栽培は進んでいった．
現代でも，コーヒーベルト各国はコーヒーシェアのほとんどを占めている．
グアテマラ・ブラジル・コロンビア・スマトラなどは，コーヒーを普段飲まない人でも聞き馴染みのある生産地であろう．

%ピアノはイタリアのクリストフォリ(1655\UTF{FF5E}1731)が作成した．ピアノが存在する前はチェンバロという，ピアノに似た楽器が存在していた．チェンバロは1500年に作られた楽器で弦を爪ではじいて音を出すものであった．
%しかし，チェンバロは音の強弱がわかりづらく，表現力に乏しいという問題点があった．
%それを不満に思ったのがクリストフォリである．クリストフォリは1700年ごろに図\ref{fig:pianosikumu}のようにハンマーで打って鳴らすという現在のピアノの原型を作りあげた．彼はこのメカニズムを備えた楽器をグラヴィチェン・コル・ピアノ・エ・フォルテ(弱音も強い音も出せるチェンバロ)と名付けた．それが普及し，現在もピアノは世界中で使用されているのである．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/map.pdf}
 \end{center}
  \caption{UCCホームページより:コーヒーの軌跡}
  \label{fig:pianosikumu}
\end{figure}


\newpage
\subsection{\large{コーヒーの流行について}}

日本の楽器人口は500万\UTF{FF5E}600万人ほどいるといわれている．それはつまり，全国民の約5％が何かしらの楽器を演奏できるということになる．
総務省統計局が実施した社会生活基本調査に，この1年間に楽器を演奏した25歳以上の人口があった．25歳未満は学生が多く，大人と行動パターンが異なる可能性があるため除外して統計をとっている．
全国の25歳以上楽器演奏人口は809万3000人で、25歳以上人口100人あたり8.18人であった．楽器演奏人口が最も多いのは東京都で，25歳以上人口100人あたり12.07人(偏差値84.1)であった．続いて2位は神奈川県で10.27人，3位以下は滋賀県(9.97人)，京都府(9.33人)，兵庫県(9.17人)の順で都市部が上位に多い．グラフを図\ref{fig:jinnkou}に示す．
一方、最も楽器演奏人口が少ないのは長崎県で25歳以上人口100人あたり4.75人(偏差値32.8)であった．これに青森県(4.82人)，高知県(5.35人)，山梨県(5.40人)，福島県(5.50人)と続いている．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=120mm]{figure/gakkijinnkou.pdf}
 \end{center}
 \caption{楽器演奏人口の上位5都府県}
 \label{fig:jinnkou}
\end{figure}

%https://todo-ran.com/t/kiji/22164
\subsubsection{\large{ファーストウェーブ}}
\subsubsection{\large{セカンドウェーブ}}
\subsubsection{\large{サードウェーブ}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{抽出器具について}}
本章では，基本的な抽出器具等を説明する．
\subsection{\large{抽出器具}}
抽出器具とは，粉末状となったコーヒー豆から，味や成分を抽出する道具のことを指す．
それぞれが多種多様な特徴を持っており，同じコーヒー豆を使っていても，使用した器具によって風味は大きく変化する．
%プアオーバー（透過式），コーヒープレス（浸漬式），エスプレッソ（高圧抽出式）は，日本で特に馴染みの深いコーヒーの抽出方法であり，様々なカフェで提供されている.
%プアオーバーは，別名ハンドドリップとも呼ばれており，




%ソロフィルター（より手軽な入門向け）は，カフェ等ではあまり提供されないが，コーヒーを初めて淹れる人でも簡単に抽出でき，入門用の器具の一つとして選定した．



%この画面では，抽出方式の異なる3つの代表的な抽出器具と，ソロフィルターを含めた4種類を選択できる．
%プアオーバー（透過式），コーヒープレス（浸漬式），エスプレッソ（高圧抽出式）は，日本で特に馴染みの深いコーヒーの抽出方法であり，様々なカフェで提供されていることから選択した．
コーヒーは，使用する抽出器具・方式によって大きく味を変える．
コーヒープレスに代表される浸漬式は，味が濃厚に抽出される反面，出来上がりの粉末感が強くなる．
プアオーバーに代表される透過式は，ペーパーフィルターを使用する場合，鮮やかでさっぱりとした味わいを表現できるが，抽出する人によって味が大きく変わることが難点である．
エスプレッソに代表される高圧抽出では，とても濃厚な味が抽出されるが，タンピングなどの独自のテクニックを習得する必要がある．
上記に挙げた3つの他にも抽出方法は多数存在し，手順やテクニックも異なるため，利用者の練度を問わず，個別の学習が必須の分野になっている．
%そもそも楽譜とは，楽曲を演奏記号や符号などの記号によって書き記されているものである．現在もピアノやバイオリンなどの弦楽器をはじめ，金管楽器や木管楽器など様々な楽器の楽譜が世界に存在している．
%5本で1組となる平行な直線を五線と言い，五線は相対的な音の高さを表している．そして，五線が数段描かれているものを五線紙といい，そこに音符という音を表す記号を書き込んだものが五線譜である．五線譜の一例を図\ref{fig:go}に表す．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=130mm]{figure/gosennfu.pdf}
 \end{center}
 \caption{五線譜の一例}
 \label{fig:go}
\end{figure}

五線譜では，音符の位置が上になるほど音階は高音域になり，下の位置になるほど低音域になる．楽曲が進むにつれて左から右に進んでいき，図\ref{fig:shuu}の終止線をもって終了することになる．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=20mm]{figure/shuusifu.pdf}
 \end{center}
 \caption{終止符}
 \label{fig:shuu}
\end{figure}

\subsubsection{\large{プアオーバー}}
プアオーバーは，別名ハンドドリップとも呼ばれており，日本の喫茶店で多く提供されてきたことから，日本人に特に馴染みの深い抽出器具と言える．
フィルターの上に挽いた豆を置き，お湯を回しかける事によって，下部のグラスサーバーにコーヒーを抽出していく．
フィルターを介しているため，出来上がりは，粉末感は殆どなくクリーンな味わいになりやすい．
また，お湯の注ぐタイミングや蒸らしの時間の掛け方などにより，様々な流派が存在し，淹れた人によって大きく風味が変化する事も特徴の一つである．
\subsubsection{\large{コーヒープレス}}
コーヒープレスは，フレンチプレスと呼ばれる器具に，挽いたコーヒー豆とお湯を入れ，時間をかけて抽出を行う器具である．
紅茶でいうティープレスのように，抽出時間経過後は上からステンレスフィルターを押し下げ，豆と液体を分離することによって，抽出を完了させる．
仕上がりは．多少の粉末感を残すものの，濃厚でまろやかな味わいである．
ステンレスフィルターを使用するため，コーヒーのオイルが吸収されず，コーヒー豆本来の味が楽しめることも利点の一つである．
\subsubsection{\large{エスプレッソ}}
エスプレッソは，イタリアを発祥とする飲み方であり，水蒸気やピストンなどで圧力をかけ，短い時間で抽出されたコーヒーのことを指す．
自動式・半自動式・ピストン式など様々なエスプレッソマシンが存在するが，使用者自身でフィルターに豆を押し込み，機械によって気圧をかける半自動式が最も一般的である．
仕上がりは極めて濃厚であり，そのままの状態で飲む以外にも，ミルクを追加しカフェラテ・カプチーノとして提供されることが多い．
\subsubsection{\large{ソロフィルター}}
ソロフィルターは，カフェ等ではあまり提供されないが，コーヒーを初めて淹れる人でも簡単に抽出でき，入門用に最適な器具の一つである．
ステンレスフィルターの上に挽いたコーヒー豆を置いた後，複数の極細の穴があるパーツに規定量のお湯を注ぐだけで，適切な湯量が豆に注がれ続ける．
容量は1杯分のコーヒー豆しか入らないため，大人数分のコーヒーを抽出するには不向きだが，粉末感の殆どない高品質なコーヒーを手軽に味わえるため，
コーヒーを学び始めの人や，朝の忙しい時間でも簡単に抽出することができる．

\newpage
\subsection{\large{抽出方式}}
ここでは，楽譜を読む上で必須である知識を説明する．
\subsubsection{\large{浸漬式}}
音部記号の中で汎用性が高いものはト音記号とヘ音記号である．ト音記号とは図\ref{fig:ton}の形をしており，高音域を表している記号である．ピアノでは多くの場合右手で演奏する．名前の由来は書き始める場所から来ていて，ト音記号は音階のソの位置から書き始める．ソは日本語表記の音階でトにあたるため，ト音記号という名称になっているのである．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=12mm]{figure/toonnkigou.pdf}
 \end{center}
 \caption{ト音記号}
 \label{fig:ton}
\end{figure}

ヘ音記号は図\ref{fig:heo}の形をしており，低音域を表している記号である．ピアノでは多くの場合左手で演奏する．
名前の由来はト音記号と同様，書き始めの場所がファであることから，日本語表記の音階でへにあたるため，ヘ音記号という名称になっている．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=12mm]{figure/bass.pdf}
 \end{center}
 \caption{へ音記号}
 \label{fig:heo}
\end{figure}

そして，ト音記号とヘ音記号の他にハ音記号という記号がある．形は図\ref{fig:haon}の形をしており，中音域を表すために使われる．別名中音部記号と言い，古典派以前はソプラノ・アルト・テノールなどの声域の表記の為に使われていた．表す音域はト音記号とヘ音記号の中間で，ハ音記号のみで広い音階に対応できる．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=12mm]{figure/alto.pdf}
 \end{center}
 \caption{ハ音記号}
 \label{fig:haon}
\end{figure}


\subsubsection{\large{透過式}}
音階とは音楽において用いられる音を，高さ順に配列したものである．音階は1オクターブを1周期として一定の音程関係で表示される．1オクターブには12個の音が存在しており，鍵盤では図\ref{fig:okka}の場所にあたる．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/okuta-bu.pdf}
 \end{center}
 \caption{1オクターブ}
 \label{fig:okka}
\end{figure}

その中でも音階の基準とされる音が7音あり，ピアノの鍵盤では白鍵にあたる．その7音は日本では汎用的にドレミファソラシドという言葉で表す．ドレミファソラシドはイタリア語の音名表記であり，日本語ではハニホヘトイロと表す．英語ではCDEFGABと表し，ドイツ語ではCDEFGAHと表す．ドイツ語表記は英語表記と似ているが読み方が異なり，
英語表記はシー・ディー・イー・エフ・ジー・エー・ビーと発音するのに対し，ドイツ語表記はツェー・デー・エー・エフ・ゲー・アー・ハーと発音するほか，最後のシの音がBではなくHであることが特徴である．

\subsubsection{\large{高圧抽出式}}
音符には種類がいくつかあり，それぞれ伸ばす音の長さやタイミングが異なる．音符は符頭(たま)・符幹(ぼう)・符尾(はた)でできており，音符の種類によって形が異なる．
それぞれ図\ref{fig:hati}に対応し，音符によって符幹が存在しなかったり，符頭が白くなったりする．基本の音符として，全音符・4部音符・2分音符・8分音符・16分音符等がある．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=50mm]{figure/onnpu-setumei.pdf}
 \end{center}
 \caption{音符}
 \label{fig:hati}
\end{figure}

\newpage
全音符は音符の基準となるもので，1小節すべてを使った音を表現する．1小節とは，曲を一定の間隔で区切った範囲のことである．詳細は3.3.4の小節で説明する．そのため，音の長さは拍子によって変化する．図\ref{fig:zenn}のように中央が白抜きになっており，符幹がないことが特徴である．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=40mm]{figure/zennonn.pdf}
 \end{center}
 \caption{全音符}
 \label{fig:zenn}
\end{figure}


2分音符は4分音符の2つ分の長さを表現しているものである．4分の4拍子という一番基本的である拍子の単位では1小節に2つ存在することになる．
図\ref{fig:ni}のように，全音符に類似した符頭である．しかし，全音符にはなかった符幹があり，4分音符に類似した形をしている．

〇部音符の数字の意味は全音符の何分の1の長さかで演奏するかということである．数字が大きいほど，小節ごとの音は細かくなり，1音符に対する音の長さは短くなっていく． 

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=60mm]{figure/nibu.pdf}
 \end{center}
 \caption{2部音符}
 \label{fig:ni}
\end{figure}


4分音符はリズムをとるときなどに利用するため，覚えやすく一般的に馴染み深い長さの音符である．1小節を4つに区切った長さを表す．基本となる音符で，テンポやリズムの指標として多く用いられる．例としてメトロノーム記号という早さを表す数字は4分音符が基準となっている．

テンポ120では，4分音符1つ分0.5秒の長さにあたる．図\ref{fig:sibu}のように符頭と符幹があり，全音符と異なり符頭が黒いことが特徴である．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=60mm]{figure/sibu.pdf}
 \end{center}
 \caption{4分音符}
 \label{fig:sibu}
\end{figure}


\newpage
8分音符は4分音符の半分の長さを表す音符である．4分音符1回鳴らしている間に，8分音符は2回鳴らすことができる．図\ref{fig:eito}のように4分音符に符尾がついた形をしている．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=110mm]{figure/hatibu.pdf}
 \end{center}
 \caption{8分音符}
 \label{fig:eito}
\end{figure}

16分音符は4分音符の1/4の長さを表す音符である．4分音符1回鳴らしている間に，16分音符は4回鳴らすことができる．休符を間に挟んで変則的なリズムにする場合もある．図\ref{fig:ju}のように8部音符の符尾を二重にした形をしている．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=130mm]{figure/jyuurokubu.pdf}
 \end{center}
 \caption{16部音符}
 \label{fig:ju}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{コーヒー抽出の学習方法}}
本章では，ピアノの基本的な指導方法を説明する．

\subsection{\large{抽出の基本的な学習方法}}
ピアノには特定の指導法はなく，指導者の方針や教k室ごとにその方針は異なる．そのため，ピアノの上達は先生の指導方法によって大きく変化する．

熟練度は低くても指導が得手である指導者もいれば，熟練度が高くても指導が不得手な指導者もいる．
各指導者の性格，腕前，環境など様々な要因があり，多種多様であるといえる．

\subsection{\large{コーヒーの学習が可能なWebサイトついて}}
前述したようにピアノには決まった指導法がなく個人のピアノ教室となると，教室ごとの特性が顕著にみられるようになる．

しかし，指導者と生徒が1対1であることが多いため，その生徒に合わせた指導ができることは共通している．
教室によっては，生徒に合わせた曲を選択したり，学習する順番を考慮したりする場合もある．

\subsection{\large{既存の音声認識可能なWebレシピについて}}
前述したようにピアノには決まった指導法がなく個人のピアノ教室となると，教室ごとの特性が顕著にみられるようになる．

しかし，指導者と生徒が1対1であることが多いため，その生徒に合わせた指導ができることは共通している．
教室によっては，生徒に合わせた曲を選択したり，学習する順番を考慮したりする場合もある．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{音声認識ツール}}
本章では，楽譜を加工する画像認識とそのツールについて説明する．
\subsection{\large{音声認識とは}}
画像認識とは，画像や動画から特徴を抽出し，対象物を識別するパターン認識技術の1つである．コンピュータは人間と異なり，経験から対象が何であるか理解することが出来ない．そのため，コンピュータは大量のデータから画像に何が移っているか解析して確率的に予測する．画像認識は1960年頃から研究されていたが，当時のコンピュータは性能が低い上に高価であったため，大学の研究機関等しか扱えなかった．しかし，現在は電子機器が普及し，その性能も大幅に上がったため，デジタルカメラやスマートフォンなど様々な機器に画像認識機能が取り入れられている．


\subsection{\large{WebSpeechAPI}}
OpenCVは正式名称，Open Source Computer Vision Libraryと呼ばれる，オープンソースのコンピュータ・ビジョン・ライブラリのことである．2006年Intelによりバージョンリリースが行われ，コンピュータで画像や動画を処理することを主な目的としている．
その後Willow Garageに引き継がれ，現在はItseezによって開発が進められている．
フィルター処理や変形処理をはじめ，物体認識や機械学習等，様々な機能を利用することができる．マルチプラットフォーム対応であり，多言語による開発が可能である．OpenCVを用いて実際に顔認識と瞳認識を行った場合，図\ref{fig:kao}のようになる．現在，プラットフォームはWindows・Linux・MacOS・Android・WindowsRTを利用でき，プログラミング言語はC・C++・Python・Javaを利用できる．
また，対応言語はバージョンを重ねるごとに充実しているため，今後さらに増える可能性がある．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=80mm]{figure/kakou.pdf}
 \end{center}
 \caption{顔認識}
 \label{fig:kao}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{プログラミング言語について}}
本章では，システムを制作する上で利用するプログラミング言語について説明する．
\subsection{\large{HTML・CSSとは}}
Pythonとは，プログラミング言語の1つである．コードがシンプルで，初心者でも扱いやすいことが特徴である．文法が単純なため，プログラムの可読性が高いことがあげられる．
多くのハードウェアとOSに対応しており，オブジェクト指向・命令型・手続き型・関数型などの形式でプログラムを書くことができる．
この特性から，PythonはWebアプリケーション開発やデスクトップアプリケーションなどの開発をはじめ，自動処理や統計・解析など幅広く使われるようになった．
プログラミング作業が容易で効率的であることから，ソフトウェア開発企業にとって時間短縮や人数削減が見込めるとして多く利用されている．
近年，機械学習が多く用いられるようになり，Pythonが利用される場面がより多くなっている．

\subsection{\large{音声認識を可能にするJavaScriptについて}}
本システムでは，楽譜を解析し，そのデータをもとに音階を割り出し，表示するシステムを開発している．画像開発を行っている上で利用しているのはOpenCVであるが，OpenCVは日本語表示ができないという特徴がある．そのため，プログラム上では英語表記の音階を扱わなくてはいけないが，出力する際には一般的に用いられるイタリア語表記の音階を表示しなくてはいけない．

そこで本研究ではPythonの画像処理ライブラリであるPillow(PIL)を用いて日本語の出力を行った．Pillowとは，PIL(Python Image Library)からフォークされた画像処理ライブラリである．OpenCVのような高度な画像処理はできないが，リサイズや回転，トリミングなどの単純な画像加工は行うことができる．実際にPillowを用いて加工を行った画像を図\ref{fig:pillow}で示す．基本的には画像の読み込み，処理，保存に使われる他，図形の描画などを行う．日本語に対応しているため，本研究ではPillowを利用して音階の表示と画像の保存を行う．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=70mm]{figure/pillow.pdf}
 \end{center}
 \caption{Pillowを用いて加工を行った画像}
 \label{fig:pillow}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{本研究で開発するWebレシピの概要}}
本章では，実際に制作するシステムについて説明する．
\subsection{\large{実装機能}}
本研究で実装する機能は音階の自動表示である．楽譜をスキャンし，その画像をOpenCVで解析することで楽譜の五線と音符の位置を割り出す．その座標から音階を割り出し，楽譜に表示させることを最終目的とする．本システムのフローチャートを図\ref{fig:furo-}に示す．

\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=90mm]{figure/furo-.pdf}
 \end{center}
 \caption{本システムのフローチャート}
 \label{fig:furo-}
\end{figure}


\newpage
\subsection{\large{本Webレシピのページ構成について}}
楽譜は音部記号と五線と音符で構成されている．つまり，その3要素を抽出できれば音階を割り出すことができるということになる．
音部記号は機械学習を用いる．機械学習はポジティブ画像（学習対象が存在している画像）とネガティブ画像(学習対象が存在してない画像)から特徴点を抽出し，対象の画像から学習対象があるか判別するものである．TrainingAssistantというカスケード分類器を利用することでポジティブ画像，ネガティブ画像，どちらにも属さない画像(関係ない記号である等)に分類することができる．本研究では，そのデータを利用することで機械学習を行う．
ト音記号の特徴を学習させることで，ト音記号のみの楽譜にも，ヘ音記号が混じった楽譜にも対処することができる．

五線は各ピクセルを解析し，ヒストグラムを生成することで座標を割り出す．各X軸の黒点の数をカウントし，一定の個数以上の黒点が検出されたX軸には五線が存在している確率が極めて高いと推測される．それを利用して座標を記録する．

音符の検出にはパターンマッチを利用する．楕円の形を検出対象とし，音符の符頭を割り出す．閾値を低めに設定して検出し，多重マッチングをしている箇所を抽出することで，正確に符頭を割り出す．また，検出した楕円の中央座標を記録することで正確に音階を割り出せるようにする．


\subsubsection{\large{抽出器具選択画面}}
OpenCVとPythonを利用して実装していく．楽譜認識は音部記号，五線，音符の順に検出していき，その情報を利用して音階の出力を試みる．

\subsubsection{\large{レシピ閲覧画面}}
OpenCVとPythonを利用して実装していく．楽譜認識は音部記号，五線，音符の順に検出していき，その情報を利用して音階の出力を試みる．

\newpage

\newpage
\subsection{\large{音声認識}}
音階を求めるために必要な情報は五線の中央の座標と音符の座標，そして五線から求める１音階の間隔である．
各音階は五線の中央(上から３本目の五線)を求め，そこから音符の楕円までどのくらいの距離があるか計算することで導くことができる．

\subsubsection{\large{音声認識の仕組み}}
まずは，前章で判明した五線の座標を読み込み，図\ref{fig:gosenngosenn}のように五線を５本１組に分割して配列に格納する．
五線の中点を求めたり，各音階を計算する上で五線は必要となるため，各線を５本１組にした．\\

\subsubsection{\large{音声認識によるページ移動}}
そして，音階を求める上で重要なのは五線の中央の線である．五線の中央は各音階を求める上で基準となる．五線の中央を図\ref{fig:gosentyuuou}に示す．
五線の中央は分割した五線を格納した配列の３番目の値を取り出すことで求めることができる．
各五線の中央の線から，音符の楕円の中央までの距離を計算し，各音階の中で最も近い値の音階を出力する．
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=60mm]{figure/tyuuoukara.pdf}
  \end{center}
 \caption{五線の中央}
 \label{fig:gosentyuuou}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{\large{結言}}
音楽は趣味や仕事の面で多くの人が関わり，古代から現代まで長く続いている文化である．職種としてのみならず，趣味としても多くの人にあげられる音楽は世界共通の言語なのである．

特にピアノは歌やその他の楽器との相性が良いことから楽器としては最も多くの人に関与するものであり，その分奏者人口も多いことが挙げられる．
ピアノを学ぶ上で楽譜は必要不可欠な要素であり，今後も多くの人々が楽譜と関わることになる．しかし，ピアノの楽譜は初心者にとって難しく，挫折の要因の１つとして挙げられる．

そこで本研究では，ピアノ指導者が各音符に手書きで音階を書き込む際，指導者にとって時間的コストがかかっている現状を問題点とし，その対策として実際に音階表示補助システムを開発し，ピアノ指導者に評価してもらうことを目的とした．

実際にOpenCVとPythonを利用し，音階を認識するシステムを制作した．実際に音階を表示し，ピアノ指導者の評価を得た．本システムを導入するかの差があるとはいえ，時間的コスト削減の面で本システムは大きく貢献できることがわかった．

また，今後の展望としては音階の表示のみならず，音階表示のパターンを変化，音階表示以外の視覚サポート，音によるサポート等ができるとより良いシステムになる．


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section*{謝辞}
本研究の遂行及び本論文の作成にあたり，須田研究室の仲間に深く感謝の意を表します．そして，何よりも本論文の作成にあたり，多大なる御指導及び御助言を頂きました須田宇宙准教授に深く感謝の意を表します．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%参考文献
\newpage
\section{\large{参考文献}}\label{参考文献}
\begin{thebibliography}{9}
%\bibitem{kawahara}名前, ``書籍名'', 出版, Vol71, No11, 年, pp197-203
\bibitem{Railshon1} 
総務省統計局 ， ``平成23年社会生活基本調査''， \url{http://www.stat.go.jp/data/shakai/2011/}\\
\bibitem{Railshon2} 
早稲田大学理工学部情報学科 　板東慶一郎， ``楽譜認識を活用した演奏支援ソフトウェア''， \url{file:///Users/masuda/Downloads/1g01p08220(5).pdf}\\
\bibitem{Railshon3} 
OpenCV team，``OpenCV''，\url{https://opencv.org/}\\
\bibitem{Railshon4} 
Python Software Foundation， ``Python''， \url{https://www.python.org/}\\
\bibitem{Railshon5} 
神奈川工科大学 情報学部 情報工学科 信号処理応用研究室 ， ``標準画像／サンプルデータ''， \url{http://www.ess.ic.kanagawa-it.ac.jp/app_images_j.html#image_dl}\\

\bibitem{Railshon6} 
paulrosen ， ``abcjsデモページ''， \url{https://abcjs.net/abcjs-editor.html}\\

\bibitem{Railshon7} 
KoheiShitaune，``TrainingAssistant''，\url{https://github.com/shkh/TrainingAssistant}\\

\bibitem{Railshon8} 
教育芸術社 市川都志春 編著，``こどものバイエル第１集''，2004年10月30日初版発行，2018年3月第34版発行，pp5\\

\bibitem{Railshon9} 
株式会社ドレミ楽譜出版社 橋本晃一 編著，``中級レベルで弾けるクラシック名曲ピアノ曲集''，1994年1月初版発行，2007年2月20日第7版発行，pp26-27\

\end{thebibliography}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%付録
\newpage
\newgeometry{left=2cm,bottom=2cm}
\appendix
\section{作成したプログラム}

\section*{Square.py}
\label{Square.py}
\listinginput{1}{program/Square.py}
\newpage

\section*{Circle.py}
\label{Circle.py}
\listinginput{1}{program/Circle.py}
\newpage

\section*{Decision.rb}
\label{Decision.rb}
\listinginput{1}{program/Decision.rb}
\newpage

\section*{Line.py}
\label{Line.py}
\listinginput{1}{program/Line.py}
\newpage

\section*{index.py}
\label{index.py}
\listinginput{1}{program/index.py}
\restoregeometry

\end{document}